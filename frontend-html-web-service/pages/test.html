<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<title>Dividends from Stocks and Mutual Funds (Section 40(4)(b))</title>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dividends from Stocks and Mutual Funds (Section 40(4)(b))</title>
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Mali Font -->
    <link
            href="https://fonts.googleapis.com/css2?family=Mali:wght@400;700&display=swap"
            rel="stylesheet"
    />
    <style>
        .font-mali {
            font-family: 'Mali', sans-serif;
        }
    </style>
</head>

<body class="flex items-center justify-center min-h-screen bg-[#c4bcac] text-black font-mali">

<!-- Header -->
<header class="bg-[#b49c74] shadow-md w-full py-4 px-6 fixed top-0 left-0">
    <div class="max-w-6xl mx-auto flex justify-between items-center">
        <h1 class="text-2xl text-[#4e342e] font-bold font-mali justify-start">
            Tax2Ready
        </h1>
        <nav class="hidden md:flex space-x-6 relative">
            <a
                    href="../tax-calculator.html"
                    class="hidden md:block bg-[#4e342e] text-white font-mali px-4 py-2 rounded-lg hover:bg-[#8d6e63]"
            >
                ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
            </a>
        </nav>
    </div>
</header>

<!-- Main Container -->
<div
        id="main-container"
        class="w-full max-w-sm md:max-w-[1100px] h-auto md:h-[600px] p-6 flex flex-col md:flex-row justify-center items-center text-center border border-gray-300 shadow-lg rounded-xl bg-[#ece4d4] mt-20"
>
    <div class="flex flex-col md:flex-row gap-10 w-full justify-center items-start">
        <!-- ‡πÉ‡∏™‡πà‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏•‡∏á‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡∏î‡πâ‡∏≤‡∏ô‡πÉ‡∏ô -->
        <div class="w-full h-auto md:h-[550px] bg-white p-6 rounded-lg shadow-md gap-6 flex flex-col justify-start overflow-y-auto">

            <!-- ‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•‡∏à‡∏≤‡∏Å‡∏´‡∏∏‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡∏£‡∏ß‡∏° -->
            <h2 class="font-bold text-2xl text-center mb-4">
                ‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•‡∏à‡∏≤‡∏Å‡∏´‡∏∏‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡∏£‡∏ß‡∏°
            </h2>

            <!-- (1) ‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ -->
            <div class="flex flex-col md:flex-row items-end md:items-end justify-end gap-2 mb-4">
                <label for="searchInput" class="whitespace-nowrap">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏´‡∏£‡∏∑‡∏≠ ‡πÄ‡∏•‡∏Ç‡∏ú‡∏π‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ):</label>
                <div class="flex gap-2">
                    <input
                            type="text"
                            id="searchInput"
                            placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô..."
                            class="border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-gray-400"
                    />
                    <button
                            onclick="handleSearch()"
                            class="bg-blue-600 text-white px-4 py-1 rounded hover:bg-blue-700"
                    >
                        ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
                    </button>
                </div>
            </div>

            <!-- (2) ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å -->
            <div class="mb-2">
                <button
                        id="deleteSelectedBtn"
                        onclick="deleteSelectedItems()"
                        class="hidden bg-red-600 text-white px-4 py-1 rounded hover:bg-red-700"
                >
                    ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
                </button>
            </div>

            <!-- (3) ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ -->
            <div class="overflow-x-auto mb-4">
                <table class="w-full border-collapse">
                    <thead>
                    <tr class="bg-gray-200">
                        <th class="border border-gray-300 p-2">
                            <input
                                    type="checkbox"
                                    class="checkbox-all"
                                    id="selectAllCheckbox"
                                    onclick="toggleSelectAll()"
                            />
                        </th>
                        <th class="border border-gray-300 p-2">‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
                        <th class="border border-gray-300 p-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó</th>
                        <th class="border border-gray-300 p-2">‡πÄ‡∏•‡∏Ç‡∏ú‡∏π‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ</th>
                        <th class="border border-gray-300 p-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•</th>
                        <th class="border border-gray-300 p-2">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•</th>
                        <th class="border border-gray-300 p-2">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏†‡∏≤‡∏©‡∏µ</th>
                        <th class="border border-gray-300 p-2">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                    </tr>
                    </thead>
                    <tbody id="tableBody"></tbody>
                </table>
            </div>

<!--            &lt;!&ndash; (4) ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ (Pagination) &ndash;&gt;-->
<!--            <div class="flex flex-col md:flex-row items-start md:items-center justify-start gap-2 mb-4">-->
<!--                <div class="flex items-center gap-2">-->
<!--                    <label for="itemsPerPageSelect" class="whitespace-nowrap">‡πÅ‡∏™‡∏î‡∏á‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤:</label>-->
<!--                    <select-->
<!--                            id="itemsPerPageSelect"-->
<!--                            onchange="changeItemsPerPage()"-->
<!--                            class="border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-gray-400"-->
<!--                    >-->
<!--                        <option value="10">10 / ‡∏´‡∏ô‡πâ‡∏≤</option>-->
<!--                        <option value="20">20 / ‡∏´‡∏ô‡πâ‡∏≤</option>-->
<!--                        <option value="30">30 / ‡∏´‡∏ô‡πâ‡∏≤</option>-->
<!--                        <option value="40">40 / ‡∏´‡∏ô‡πâ‡∏≤</option>-->
<!--                        <option value="50">50 / ‡∏´‡∏ô‡πâ‡∏≤</option>-->
<!--                    </select>-->
<!--                </div>-->
<!--                <div class="flex items-center gap-2">-->
<!--                    <button-->
<!--                            onclick="prevPage()"-->
<!--                            class="bg-gray-300 px-3 py-1 rounded hover:bg-gray-400"-->
<!--                    >-->
<!--                        ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤-->
<!--                    </button>-->
<!--                    <span id="currentPageInfo" class="font-semibold">‡∏´‡∏ô‡πâ‡∏≤ 1</span>-->
<!--                    <button-->
<!--                            onclick="nextPage()"-->
<!--                            class="bg-gray-300 px-3 py-1 rounded hover:bg-gray-400"-->
<!--                    >-->
<!--                        ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ-->
<!--                    </button>-->
<!--                </div>-->
<!--            </div>-->

<!--            &lt;!&ndash; (5) ‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏£‡∏ß‡∏° &ndash;&gt;-->
<!--            <div id="summarySection" class="bg-gray-50 p-4 border border-gray-300 rounded mb-4 text-left">-->
<!--                <div class="mb-1">‡∏£‡∏ß‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•/‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏ö‡πà‡∏á‡∏Å‡∏≥‡πÑ‡∏£‡∏à‡∏≤‡∏Å‡∏´‡∏∏‡πâ‡∏ô: <span id="totalStock">0.00</span> ‡∏ö‡∏≤‡∏ó</div>-->
<!--                <div class="mb-1">‡∏£‡∏ß‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•/‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏ö‡πà‡∏á‡∏Å‡∏≥‡πÑ‡∏£‡∏à‡∏≤‡∏Å‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô: <span id="totalFund">0.00</span> ‡∏ö‡∏≤‡∏ó</div>-->
<!--                <div class="mb-1">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏´‡∏±‡∏Å ‡∏ì ‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢: <span id="totalTaxWithheld">0.00</span> ‡∏ö‡∏≤‡∏ó</div>-->
<!--            </div>-->

            <!-- (6) ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ -->
            <div class="p-4 border border-gray-300 rounded">
                <h2 class="text-lg font-semibold mb-4">‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏±‡∏ô‡∏ú‡∏• / ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏ö‡πà‡∏á‡∏Å‡∏≥‡πÑ‡∏£</h2>

                <!-- ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏• (‡∏´‡∏∏‡πâ‡∏ô/‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô) -->
                <div class="mb-4 flex items-center gap-4">
                    <span>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•:</span>
                    <label class="flex items-center gap-1 cursor-pointer">
                        <input
                                type="radio"
                                name="dividendType"
                                id="typeStock"
                                value="‡∏´‡∏∏‡πâ‡∏ô"
                                checked
                                onclick="handleDividendTypeChange()"
                        />
                        ‡∏´‡∏∏‡πâ‡∏ô
                    </label>
                    <label class="flex items-center gap-1 cursor-pointer">
                        <input
                                type="radio"
                                name="dividendType"
                                id="typeFund"
                                value="‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô"
                                onclick="handleDividendTypeChange()"
                        />
                        ‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô
                    </label>
                </div>

                <!-- ‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏≠‡∏á‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <!-- ‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà 1: ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡πÅ‡∏•‡∏∞ ‡πÄ‡∏•‡∏Ç‡∏ú‡∏π‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ -->
                    <div class="flex flex-col">
                        <label for="companyName" class="mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó</label>
                        <input
                                type="text"
                                id="companyName"
                                placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"
                                class="border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-gray-400"
                        />
                    </div>
                    <div class="flex flex-col">
                        <label for="taxId" class="mb-1">‡πÄ‡∏•‡∏Ç‡∏ú‡∏π‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ</label>
                        <input
                                type="text"
                                id="taxId"
                                placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"
                                class="border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-gray-400"
                        />

                    </div>

                    <!-- ‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà 2: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏• ‡πÅ‡∏•‡∏∞ ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏†‡∏≤‡∏©‡∏µ -->
                    <div class="flex flex-col">
                        <label for="amount" class="mb-1">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•/‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏ö‡πà‡∏á‡∏Å‡∏≥‡πÑ‡∏£</label>
                        <input
                                type="number"
                                id="amount"
                                placeholder="0.00"
                                step="0.01"
                                class="border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-gray-400"
                        />
                    </div>
                    <div class="flex flex-col">
                        <label for="taxRate" class="mb-1">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏†‡∏≤‡∏©‡∏µ</label>
                        <select
                                id="taxRate"
                                class="border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-gray-400"
                        >
                            <!-- ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏©‡∏µ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏î‡∏¢ handleDividendTypeChange() -->
                        </select>
                    </div>
                </div>


                <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å -->
                <div class="flex gap-4 items-center md:items-center justify-center">
                    <button
                            onclick="cancelForm()"
                            class="bg-gray-400 text-white px-4 py-1 rounded hover:bg-gray-500"
                    >
                        ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                    </button>
                    <button
                            onclick="saveItem()"
                            class="bg-green-600 text-white px-4 py-1 rounded hover:bg-green-700"
                    >
                        ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                    </button>
                </div>
            </div>

            <!-- (4) ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ (Pagination) -->
            <div class="flex flex-col md:flex-row items-center md:items-center justify-center gap-2 mb-4">
                <div class="flex items-center gap-2">
                    <label for="itemsPerPageSelect" class="whitespace-nowrap">‡πÅ‡∏™‡∏î‡∏á‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤:</label>
                    <select
                            id="itemsPerPageSelect"
                            onchange="changeItemsPerPage()"
                            class="border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-gray-400"
                    >
                        <option value="10">10 / ‡∏´‡∏ô‡πâ‡∏≤</option>
                        <option value="20">20 / ‡∏´‡∏ô‡πâ‡∏≤</option>
                        <option value="30">30 / ‡∏´‡∏ô‡πâ‡∏≤</option>
                        <option value="40">40 / ‡∏´‡∏ô‡πâ‡∏≤</option>
                        <option value="50">50 / ‡∏´‡∏ô‡πâ‡∏≤</option>
                    </select>
                </div>
                <div class="flex items-center gap-2">
                    <button
                            onclick="prevPage()"
                            class="bg-gray-300 px-3 py-1 rounded hover:bg-gray-400"
                    >
                        ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
                    </button>
                    <span id="currentPageInfo" class="font-semibold">‡∏´‡∏ô‡πâ‡∏≤ 1</span>
                    <button
                            onclick="nextPage()"
                            class="bg-gray-300 px-3 py-1 rounded hover:bg-gray-400"
                    >
                        ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
                    </button>
                </div>
            </div>

            <!-- (5) ‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏£‡∏ß‡∏° -->
            <div id="summarySection" class="bg-gray-50 p-4 border border-gray-300 rounded mb-4 text-left">
                <div class="mb-1">‡∏£‡∏ß‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•/‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏ö‡πà‡∏á‡∏Å‡∏≥‡πÑ‡∏£‡∏à‡∏≤‡∏Å‡∏´‡∏∏‡πâ‡∏ô: <span id="totalStock">0.00</span> ‡∏ö‡∏≤‡∏ó</div>
                <div class="mb-1">‡∏£‡∏ß‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•/‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏ö‡πà‡∏á‡∏Å‡∏≥‡πÑ‡∏£‡∏à‡∏≤‡∏Å‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô: <span id="totalFund">0.00</span> ‡∏ö‡∏≤‡∏ó</div>
                <div class="mb-1">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏´‡∏±‡∏Å ‡∏ì ‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢: <span id="totalTaxWithheld">0.00</span> ‡∏ö‡∏≤‡∏ó</div>
            </div>

        </div>
    </div>
</div>

<!-- Script ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡πâ‡∏≤‡∏¢ -->
<script>
    // =========================
    // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏´‡∏•‡∏±‡∏Å
    // =========================
    let dataList = [];           // ‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    let currentPage = 1;         // ‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
    let itemsPerPage = 10;       // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤
    let filteredList = [];       // ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ‡∏à‡∏∞‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö dataList)
    let idEdit = null;           // ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏≠‡∏î‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)

    // ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏†‡∏≤‡∏©‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "‡∏´‡∏∏‡πâ‡∏ô")
    const allTaxRates = [
        "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ 35",
        "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ 30",
        "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ 25",
        "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ 23",
        "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ 20",
        "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ 15",
        "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ 12.5",
        "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ 11.5",
        "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ 10",
        "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ 3",
        "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ 1.5",
        "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏†‡∏≤‡∏©‡∏µ",
        "‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡∏†‡∏≤‡∏©‡∏µ"
    ];

    // =========================
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
    // =========================
    window.onload = function() {
        // ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ô dropdown (‡∏´‡∏∏‡πâ‡∏ô)
        populateTaxRateOptionsForStock();

        // ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
        const sampleData = [
            {
                id: 1,
                companyName: "ABC ‡∏à‡∏≥‡∏Å‡∏±‡∏î",
                taxId: "9-5940-20026-99-9",
                amount: 23.00,
                dividendType: "‡∏´‡∏∏‡πâ‡∏ô",
                taxRate: "‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞ 35"
            },
            {
                id: 2,
                companyName: "AUCODIN",
                taxId: "1-1111-11111-11-1",
                amount: 34.00,
                dividendType: "‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô",
                taxRate: "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏†‡∏≤‡∏©‡∏µ"
            }
        ];
        dataList = sampleData.slice();
        filteredList = dataList.slice();
        renderTable();
    };

    // =========================
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á option ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "‡∏´‡∏∏‡πâ‡∏ô"
    // =========================
    function populateTaxRateOptionsForStock() {
        const taxRateSelect = document.getElementById("taxRate");
        taxRateSelect.innerHTML = allTaxRates
            .map(rate => `<option value="${rate}">${rate}</option>`)
            .join("");
    }

    // =========================
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô render ‡∏ï‡∏≤‡∏£‡∏≤‡∏á
    // =========================
    function renderTable() {
        const tableBody = document.getElementById("tableBody");
        tableBody.innerHTML = "";

        // ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏≠‡∏∞‡πÑ‡∏£ filteredList ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô dataList
        if (filteredList.length === 0 && document.getElementById("searchInput").value.trim() === "") {
            filteredList = dataList.slice();
        }

        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì start, end ‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = startIndex + itemsPerPage;
        const pageItems = filteredList.slice(startIndex, endIndex);

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á row ‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
        pageItems.forEach((item, index) => {
            const row = document.createElement("tr");

            // checkbox
            const tdCheckbox = document.createElement("td");
            tdCheckbox.className = "border border-gray-300 p-2";
            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.className = "checkbox-item";
            checkbox.dataset.id = item.id;
            tdCheckbox.appendChild(checkbox);
            row.appendChild(tdCheckbox);

            // ‡∏•‡∏≥‡∏î‡∏±‡∏ö
            const tdIndex = document.createElement("td");
            tdIndex.className = "border border-gray-300 p-2";
            tdIndex.textContent = startIndex + index + 1;
            row.appendChild(tdIndex);

            // ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó
            const tdCompany = document.createElement("td");
            tdCompany.className = "border border-gray-300 p-2";
            tdCompany.textContent = item.companyName;
            row.appendChild(tdCompany);

            // ‡πÄ‡∏•‡∏Ç‡∏ú‡∏π‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ
            const tdTaxId = document.createElement("td");
            tdTaxId.className = "border border-gray-300 p-2";
            tdTaxId.textContent = item.taxId;
            row.appendChild(tdTaxId);

            // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•
            const tdAmount = document.createElement("td");
            tdAmount.className = "border border-gray-300 p-2";
            tdAmount.textContent = item.amount.toFixed(2);
            row.appendChild(tdAmount);

            // ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•
            const tdType = document.createElement("td");
            tdType.className = "border border-gray-300 p-2";
            tdType.textContent = item.dividendType;
            row.appendChild(tdType);

            // ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏†‡∏≤‡∏©‡∏µ
            const tdTaxRate = document.createElement("td");
            tdTaxRate.className = "border border-gray-300 p-2";
            tdTaxRate.textContent = item.taxRate;
            row.appendChild(tdTaxRate);

            // ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç, ‡∏•‡∏ö)
            const tdActions = document.createElement("td");
            tdActions.className = "border border-gray-300 p-2";

            // ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
            const editIcon = document.createElement("span");
            editIcon.textContent = "üìù";
            editIcon.title = "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£";
            editIcon.className = "cursor-pointer mr-2";
            editIcon.onclick = () => editItem(item.id);

            // ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö
            const deleteIcon = document.createElement("span");
            deleteIcon.textContent = "‚ùå";
            deleteIcon.title = "‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ";
            deleteIcon.className = "cursor-pointer text-red-500";
            deleteIcon.onclick = () => deleteItem(item.id);

            tdActions.appendChild(editIcon);
            tdActions.appendChild(deleteIcon);
            row.appendChild(tdActions);

            tableBody.appendChild(row);
        });

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ checkbox selectAll
        document.getElementById("selectAllCheckbox").checked = false;

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï summary
        updateSummary();

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏•‡∏Ç‡∏´‡∏ô‡πâ‡∏≤
        document.getElementById("currentPageInfo").textContent = `‡∏´‡∏ô‡πâ‡∏≤ ${currentPage}`;
    }

    // =========================
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    // =========================
    function saveItem() {
        const companyName = document.getElementById("companyName").value.trim();
        const taxId = document.getElementById("taxId").value.trim();
        const amount = parseFloat(document.getElementById("amount").value) || 0;
        const dividendType = document.querySelector('input[name="dividendType"]:checked').value;
        let taxRate = document.getElementById("taxRate").value;

        // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô => ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏†‡∏≤‡∏©‡∏µ"
        if (dividendType === "‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô") {
            taxRate = "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏†‡∏≤‡∏©‡∏µ";
        }

        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö
        if (!companyName || !taxId) {
            alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏Ç‡∏ú‡∏π‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô");
            return;
        }

        // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ idEdit ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
        if (idEdit !== null) {
            const indexToEdit = dataList.findIndex(item => item.id === idEdit);
            if (indexToEdit !== -1) {
                dataList[indexToEdit].companyName = companyName;
                dataList[indexToEdit].taxId = taxId;
                dataList[indexToEdit].amount = amount;
                dataList[indexToEdit].dividendType = dividendType;
                dataList[indexToEdit].taxRate = taxRate;
            }
            idEdit = null;
        } else {
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà
            const newItem = {
                id: Date.now(),
                companyName,
                taxId,
                amount,
                dividendType,
                taxRate
            };
            dataList.push(newItem);
        }

        // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ü‡∏≠‡∏£‡πå‡∏°
        cancelForm();

        // ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏ï‡∏≤‡∏£‡∏≤‡∏á
        filteredList = dataList.slice();
        renderTable();
    }

    // =========================
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
    // =========================
    function editItem(id) {
        const item = dataList.find(d => d.id === id);
        if (!item) return;

        document.getElementById("companyName").value = item.companyName;
        document.getElementById("taxId").value = item.taxId;
        document.getElementById("amount").value = item.amount;

        if (item.dividendType === "‡∏´‡∏∏‡πâ‡∏ô") {
            document.getElementById("typeStock").checked = true;
        } else {
            document.getElementById("typeFund").checked = true;
        }

        // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô -> ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö dropdown
        if (item.dividendType === "‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô") {
            document.getElementById("taxRate").innerHTML = `<option value="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏†‡∏≤‡∏©‡∏µ">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏†‡∏≤‡∏©‡∏µ</option>`;
        } else {
            // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏∏‡πâ‡∏ô -> ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            populateTaxRateOptionsForStock();
        }

        document.getElementById("taxRate").value = item.taxRate;
        idEdit = id;
    }

    // =========================
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß
    // =========================
    function deleteItem(id) {
        if (!confirm("‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) return;
        dataList = dataList.filter(item => item.id !== id);
        filteredList = dataList.slice();
        renderTable();
    }

    // =========================
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
    // =========================
    function deleteSelectedItems() {
        if (!confirm("‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) return;

        const checkboxes = document.querySelectorAll(".checkbox-item:checked");
        const idsToDelete = Array.from(checkboxes).map(cb => Number(cb.dataset.id));

        dataList = dataList.filter(item => !idsToDelete.includes(item.id));
        filteredList = dataList.slice();

        // ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
        document.getElementById("deleteSelectedBtn").classList.add("hidden");
        renderTable();
    }

    // =========================
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ü‡∏≠‡∏£‡πå‡∏° (‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å)
    // =========================
    function cancelForm() {
        document.getElementById("companyName").value = "";
        document.getElementById("taxId").value = "";
        document.getElementById("amount").value = "";
        document.getElementById("typeStock").checked = true;
        populateTaxRateOptionsForStock(); // ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏©‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏∏‡πâ‡∏ô
        idEdit = null;
    }

    // =========================
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
    // =========================
    function handleSearch() {
        const keyword = document.getElementById("searchInput").value.trim().toLowerCase();
        if (keyword === "") {
            filteredList = dataList.slice();
        } else {
            filteredList = dataList.filter(item =>
                item.companyName.toLowerCase().includes(keyword) ||
                item.taxId.toLowerCase().includes(keyword)
            );
        }
        currentPage = 1;
        renderTable();
    }

    // =========================
    // toggle select all
    // =========================
    function toggleSelectAll() {
        const selectAllCheckbox = document.getElementById("selectAllCheckbox");
        const checkboxes = document.querySelectorAll(".checkbox-item");
        checkboxes.forEach(cb => {
            cb.checked = selectAllCheckbox.checked;
        });
        showOrHideDeleteSelectedBtn();
    }

    // =========================
    // ‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
    // =========================
    document.addEventListener("change", function(e) {
        if (e.target && e.target.classList.contains("checkbox-item")) {
            showOrHideDeleteSelectedBtn();
        }
    });

    function showOrHideDeleteSelectedBtn() {
        const checkboxes = document.querySelectorAll(".checkbox-item:checked");
        if (checkboxes.length > 0) {
            document.getElementById("deleteSelectedBtn").classList.remove("hidden");
        } else {
            document.getElementById("deleteSelectedBtn").classList.add("hidden");
        }
    }

    // =========================
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•
    // =========================
    function handleDividendTypeChange() {
        const typeStock = document.getElementById("typeStock").checked;
        const taxRateSelect = document.getElementById("taxRate");

        if (typeStock) {
            // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏∏‡πâ‡∏ô ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            populateTaxRateOptionsForStock();
        } else {
            // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô => ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏†‡∏≤‡∏©‡∏µ" ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
            taxRateSelect.innerHTML = `<option value="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏†‡∏≤‡∏©‡∏µ">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏†‡∏≤‡∏©‡∏µ</option>`;
        }
    }

    // =========================
    // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤
    // =========================
    function changeItemsPerPage() {
        const select = document.getElementById("itemsPerPageSelect");
        itemsPerPage = parseInt(select.value);
        currentPage = 1;
        renderTable();
    }

    // =========================
    // ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ / ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
    // =========================
    function prevPage() {
        if (currentPage > 1) {
            currentPage--;
            renderTable();
        }
    }

    function nextPage() {
        const totalPages = Math.ceil(filteredList.length / itemsPerPage);
        if (currentPage < totalPages) {
            currentPage++;
            renderTable();
        }
    }

    // =========================
    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏£‡∏ß‡∏°
    // =========================
    function updateSummary() {
        let totalStock = 0;
        let totalFund = 0;
        let totalTaxWithheld = 0;

        dataList.forEach(item => {
            if (item.dividendType === "‡∏´‡∏∏‡πâ‡∏ô") {
                totalStock += item.amount;
            } else if (item.dividendType === "‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô") {
                totalFund += item.amount;
            }
            // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏´‡∏±‡∏Å ‡∏ì ‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢ = 10% ‡∏Ç‡∏≠‡∏á amount
            totalTaxWithheld += item.amount * 0.1;
        });

        document.getElementById("totalStock").textContent = totalStock.toFixed(2);
        document.getElementById("totalFund").textContent = totalFund.toFixed(2);
        document.getElementById("totalTaxWithheld").textContent = totalTaxWithheld.toFixed(2);
    }
</script>

</body>
</html>
